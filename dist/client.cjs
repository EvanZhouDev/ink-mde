"use strict";var rt=Object.create;var Me=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var it=Object.getOwnPropertyNames;var at=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var lt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of it(t))!st.call(e,i)&&i!==n&&Me(e,i,{get:()=>t[i],enumerable:!(r=ot(t,i))||r.enumerable});return e};var ct=(e,t,n)=>(n=e!=null?rt(at(e)):{},lt(t||!e||!e.__esModule?Me(n,"default",{value:e,enumerable:!0}):n,e));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("solid-js/web"),Z=require("@codemirror/commands"),b=require("@codemirror/state"),g=require("@codemirror/view"),oe=require("@codemirror/lang-markdown"),Te=require("@codemirror/language-data"),P=require("@codemirror/language"),m=require("@lezer/highlight"),u=require("solid-js"),Ee=require("@codemirror/autocomplete"),q=require("@codemirror/search"),dt=require("@replit/codemirror-vim"),ut="data-ink-mde-ssr-hydration-marker",ft=`[${ut}]`,mt=()=>({}),gt=([e])=>{const{editor:t}=e();t.destroy()},me=([e])=>{const{editor:t}=e();t.hasFocus||t.focus()},De=e=>{const t=e.map(n=>b.SelectionRange.fromJSON({anchor:n.start,head:n.end}));return b.EditorSelection.create(t)},Oe=e=>e.ranges.map(n=>({end:n.anchor<n.head?n.head:n.anchor,start:n.head<n.anchor?n.head:n.anchor}));var ie=(e=>(e.Auto="auto",e.Dark="dark",e.Light="light",e))(ie||{}),h=(e=>(e.Bold="bold",e.Code="code",e.CodeBlock="code_block",e.Heading="heading",e.Image="image",e.Italic="italic",e.Link="link",e.List="list",e.OrderedList="ordered_list",e.Quote="quote",e.TaskList="task_list",e))(h||{}),ge=(e=>(e.End="end",e.Start="start",e))(ge||{});const pe={auto:"auto",dark:"dark",light:"light"},A={completion:"completion",default:"default",grammar:"grammar",language:"language"},L=e=>({...{block:!1,line:!1,multiline:!1,nodes:[],prefix:"",prefixStates:[],suffix:""},...e}),pt={[h.Bold]:L({nodes:["StrongEmphasis"],prefix:"**",suffix:"**"}),[h.Code]:L({nodes:["InlineCode"],prefix:"`",suffix:"`"}),[h.CodeBlock]:L({block:!0,nodes:["FencedCode"],prefix:"```\n",suffix:"\n```"}),[h.Heading]:L({multiline:!0,nodes:["ATXHeading1","ATXHeading2","ATXHeading3","ATXHeading4","ATXHeading5","ATXHeading6"],prefix:"# ",prefixStates:["# ","## ","### ","#### ","##### ","###### ",""]}),[h.Image]:L({nodes:["Image"],prefix:"![](",suffix:")"}),[h.Italic]:L({nodes:["Emphasis"],prefix:"*",suffix:"*"}),[h.Link]:L({nodes:["Link"],prefix:"[](",suffix:")"}),[h.OrderedList]:L({line:!0,multiline:!0,nodes:["OrderedList"],prefix:"1. "}),[h.Quote]:L({line:!0,multiline:!0,nodes:["Blockquote"],prefix:"> "}),[h.TaskList]:L({line:!0,multiline:!0,nodes:["BulletList"],prefix:"- [ ] "}),[h.List]:L({line:!0,multiline:!0,nodes:["BulletList"],prefix:"- "})},kt=({editor:e,selection:t})=>{let n=t.start;const r=[];for(;n<=t.end;){const i=e.lineBlockAt(n),a=Math.max(t.start,i.from),l=Math.min(t.end,i.to);r.push({start:a,end:l}),n=i.to+1}return r},ht=({editor:e,formatDefinition:t,selection:n})=>{if(!e||!t)return n||{start:0,end:0};const r=n||Oe(e.state.selection).pop()||{start:0,end:0};if(t.block||t.line||t.multiline){const l=e.lineBlockAt(r.start).from,s=e.lineBlockAt(r.end).to;return{start:l,end:s}}const i=e.state.wordAt(r.start)?.from||r.start,a=e.state.wordAt(r.end)?.to||r.end;return{start:i,end:a}},ze=e=>e.editor.state.sliceDoc(e.selection.start,e.selection.end),bt=(e,t,n)=>xt(e,n).find(({type:i})=>t.nodes.includes(i.name)),xt=(e,t)=>{const n=[];return P.syntaxTree(e.state).iterate({from:t.start,to:t.end,enter:({type:r,from:i,to:a})=>{n.push({type:r,from:i,to:a})}}),n},xe=e=>{const t=ze(e),n=e.formatDefinition.prefix.length,r=e.formatDefinition.suffix.length*-1||t.length,i=t.slice(n,r);return[{from:e.selection.start,to:e.selection.end,insert:i}]},yt=e=>{if(e.node){const t=e.node.from,n=e.node.to;return xe({...e,selection:{start:t,end:n}})}else{const t=e.formatDefinition.prefix,n=e.formatDefinition.suffix;return[{from:e.selection.start,insert:t},{from:e.selection.end,insert:n}]}},vt=e=>{const t=kt(e),n=[];return t.forEach(r=>{const i=Ae({...e,selection:r});n.push(...i)}),n},Ae=e=>{const t=e.formatDefinition.prefixStates.length>0,n=ze(e);if(e.node&&t){const r=e.formatDefinition.prefixStates.find(i=>n.startsWith(i));if(r){const i=e.formatDefinition.prefixStates.indexOf(r),a=e.formatDefinition.prefixStates[i+1],l=n.replace(new RegExp(`^${r}`),a);return[{from:e.selection.start,to:e.selection.end,insert:l}]}}else if(e.node&&n.startsWith(e.formatDefinition.prefix))return xe(e);return[{from:e.selection.start,insert:e.formatDefinition.prefix}]},wt=e=>{if(e.node){const t=e.node.from,n=e.node.to;return xe({...e,selection:{start:t,end:n}})}else{const{formatDefinition:t,selection:n}=e,r=Array.isArray(t.prefix)?t.prefix[0]:t.prefix,i=t.suffix;return[{from:n.start,insert:r},{from:n.end,insert:i}]}},$t=e=>e.formatDefinition.block?yt(e):e.formatDefinition.multiline?vt(e):e.formatDefinition.line?Ae(e):wt(e),ae=([e],t,{selection:n}={})=>{const{editor:r}=e(),i=pt[t],a=ht({editor:r,formatDefinition:i,selection:n});if(a.start===a.end){const l=[{from:a.start,insert:i.prefix},{from:a.start,insert:i.suffix}],s=a.start+i.prefix.length,c=e().editor.state.update({changes:l,selection:{head:s,anchor:s}});e().editor.dispatch(c),e().editor.focus()}else{const l=bt(r,i,a),c=$t({editor:r,formatDefinition:i,node:l,selection:a}),d=c.reduce((x,y)=>{const _=y.insert.length-((y.to||y.from)-y.from);return x+_},0),f=e().editor.state.update({changes:c,selection:{head:a.start,anchor:a.end+d}});e().editor.dispatch(f),e().editor.focus()}},_t=([e])=>{const{editor:t}=e();return t.state.sliceDoc()},ye=([e])=>{const{editor:t}=e();return Oe(t.state.selection)},ce=([e,t],n,r,i=!1)=>{const{editor:a}=e();let l=r?.start,s=r?.end||r?.start;if(typeof l>"u"){const d=ye([e,t]).pop();l=d.start,s=d.end}const c={changes:{from:l,to:s,insert:n}};if(i){const d=l===s?l+n.length:l,f=l+n.length;Object.assign(c,{selection:{anchor:d,head:f}})}a.dispatch(a.state.update(c))},R={array:"[object Array]",object:"[object Object]",string:"[object String]",undefined:"[object Undefined]",window:"[object Window]"},St=e=>{if(Object.prototype.toString.call(e)===R.object)return`[object ${e.constructor.name}]`},W=(e,t)=>St(e)===t,Ct=(e,t)=>{const n=new WeakMap,r=(i,a)=>n.get(i)||(W(i,R.object)&&n.set(i,!0),W(a,R.undefined))?i:W(i,R.array)&&W(a,R.array)?[...a]:W(i,R.object)&&W(a,R.object)?Object.keys(i).reduce((l,s)=>(Object.hasOwnProperty.call(a,s)?l[s]=r(i[s],a[s]):l[s]=i[s],l),{}):a;return r(e,t)},J=(e,t)=>Ct(e,t),Mt={array:"[object Array]",asyncFunction:"[object AsyncFunction]",boolean:"[object Boolean]",function:"[object Function]",null:"[object Null]",number:"[object Number]",object:"[object Object]",promise:"[object Promise]",string:"[object String]",symbol:"[object Symbol]",undefined:"[object Undefined]",window:"[object Window]"},Et=(e,t)=>Object.prototype.toString.call(t)===e,Be=e=>Et(Mt.promise,e),G=e=>jt(e,Be),Lt=(e,t)=>t.type===e,Nt=(e,t)=>!!e&&e in t,V=(e,t)=>He(t.plugins).reduce((n,r)=>(Lt(e,r)&&(!r.key||Nt(r.key,t)&&t[r.key])&&n.push(r.value),n),[]),He=e=>e.reduce((t,n)=>Array.isArray(n)?t.concat(He(n)):t.concat(n),[]),jt=(e,t)=>e.reduce((n,r)=>(t(r)?n[0].push(r):n[1].push(r),n),[[],[]]),Pt=([e,t])=>{const n=[],[r,i]=Tt(e().options),[a,l]=Dt(e().options);return Math.max(r.length,a.length)>0&&e().workQueue.enqueue(async()=>{const s=await de([e,t]);e().editor.dispatch({effects:s})}),oe.markdown({base:oe.markdownLanguage,codeLanguages:[...Te.languages,...l],extensions:[...n,...i]})},Tt=e=>G(V(A.grammar,e)),Dt=e=>G(V(A.language,e)),Ot=async([e])=>{const t=[],n=await Promise.all(V(A.grammar,e().options)),r=await Promise.all(V(A.language,e().options));return oe.markdown({base:oe.markdownLanguage,codeLanguages:[...Te.languages,...r],extensions:[...t,...n]})},zt=()=>{const e=new b.Compartment;return{compartment:e,initialValue:t=>e.of(Pt(t)),reconfigure:async t=>e.reconfigure(await Ot(t))}},Le=()=>document.createElement("div"),qe=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,At=e=>e===ie.Dark?!0:e===ie.Light?!1:qe(),fe=e=>{const t=[{suffix:"border-radius",default:"0.25rem"},{suffix:"color",default:"currentColor"},{suffix:"flex-direction",default:"column"},{suffix:"font-family",default:"inherit"},{suffix:"block-background-color",default:"#121212",light:"#f5f5f5"},{suffix:"block-background-color-on-hover",default:"#0f0f0f",light:"#e0e0e0"},{suffix:"block-max-height",default:"20rem"},{suffix:"block-padding",default:"0.5rem"},{suffix:"code-background-color",default:"var(--ink-internal-block-background-color)"},{suffix:"code-color",default:"inherit"},{suffix:"code-font-family",default:"'Monaco', Courier, monospace"},{suffix:"editor-font-size",default:"1em"},{suffix:"editor-line-height",default:"2em"},{suffix:"editor-padding",default:"0.5rem"},{suffix:"inline-padding",default:"0.125rem"},{suffix:"modal-position",default:"fixed"},{suffix:"syntax-atom-color",default:"#d19a66"},{suffix:"syntax-comment-color",default:"#abb2bf"},{suffix:"syntax-comment-font-style",default:"italic"},{suffix:"syntax-emphasis-color",default:"inherit"},{suffix:"syntax-emphasis-font-style",default:"italic"},{suffix:"syntax-hashtag-background-color",default:"#222",light:"#eee"},{suffix:"syntax-hashtag-color",default:"inherit"},{suffix:"syntax-heading-color",default:"inherit"},{suffix:"syntax-heading-font-weight",default:"600"},{suffix:"syntax-heading1-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading1-font-size",default:"1.6em"},{suffix:"syntax-heading1-font-weight",default:"600"},{suffix:"syntax-heading2-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading2-font-size",default:"1.5em"},{suffix:"syntax-heading2-font-weight",default:"600"},{suffix:"syntax-heading3-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading3-font-size",default:"1.4em"},{suffix:"syntax-heading3-font-weight",default:"600"},{suffix:"syntax-heading4-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading4-font-size",default:"1.3em"},{suffix:"syntax-heading4-font-weight",default:"600"},{suffix:"syntax-heading5-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading5-font-size",default:"1.2em"},{suffix:"syntax-heading5-font-weight",default:"600"},{suffix:"syntax-heading6-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading6-font-size",default:"1.1em"},{suffix:"syntax-heading6-font-weight",default:"600"},{suffix:"syntax-highlight-background-color",default:"#555555"},{suffix:"syntax-keyword-color",default:"#c678dd"},{suffix:"syntax-link-color",default:"inherit"},{suffix:"syntax-meta-color",default:"#abb2bf"},{suffix:"syntax-monospace-color",default:"var(--ink-internal-code-color)"},{suffix:"syntax-monospace-font-family",default:"var(--ink-internal-code-font-family)"},{suffix:"syntax-name-color",default:"#d19a66"},{suffix:"syntax-name-label-color",default:"#abb2bf"},{suffix:"syntax-name-property-color",default:"#96c0d8"},{suffix:"syntax-name-property-definition-color",default:"#e06c75"},{suffix:"syntax-name-variable-color",default:"#e06c75"},{suffix:"syntax-name-variable-definition-color",default:"#e5c07b"},{suffix:"syntax-name-variable-local-color",default:"#d19a66"},{suffix:"syntax-name-variable-special-color",default:"inherit"},{suffix:"syntax-number-color",default:"#d19a66"},{suffix:"syntax-operator-color",default:"#96c0d8"},{suffix:"syntax-processing-instruction-color",default:"#444444",light:"#bbbbbb"},{suffix:"syntax-punctuation-color",default:"#abb2bf"},{suffix:"syntax-strikethrough-color",default:"inherit"},{suffix:"syntax-strikethrough-text-decoration",default:"line-through"},{suffix:"syntax-string-color",default:"#98c379"},{suffix:"syntax-string-special-color",default:"inherit"},{suffix:"syntax-strong-color",default:"inherit"},{suffix:"syntax-strong-font-weight",default:"600"},{suffix:"syntax-url-color",default:"#aaaaaa",light:"#666666"},{suffix:"toolbar-group-spacing",default:"2rem"},{suffix:"toolbar-item-spacing",default:"0"}],n=!At(e.options.interface.appearance);return t.map(r=>{const i=n&&r.light?r.light:r.default;return`--ink-internal-${r.suffix}: var(--ink-${r.suffix}, ${i});`})},Bt=e=>[g.EditorView.theme({".cm-scroller":{fontFamily:"var(--ink-internal-font-family)"}},{dark:e})],Ht=([e,t])=>{const n=e().extensions.map(r=>r.initialValue([e,t]));return console.log(n),n},de=async([e,t])=>await Promise.all(e().extensions.map(async r=>await r.reconfigure([e,t]))),qt=e=>{const t=new b.Compartment;return{compartment:t,initialValue:n=>t.of(e(n)),reconfigure:n=>t.reconfigure(e(n))}},Rt=e=>{const t=new b.Compartment;return{compartment:t,initialValue:()=>t.of([]),reconfigure:n=>e(n,t)}},Vt=()=>[zt(),...It.map(e=>qt(e)),...Wt.map(e=>Rt(e))],It=[([e])=>{const[t,n]=G(V(A.default,e().options));return n},([e])=>{const t=e().options.interface.appearance===pe.dark,n=e().options.interface.appearance===pe.auto;return Bt(t||n&&qe())}],Wt=[async([e],t)=>{const[n]=G(V(A.default,e().options));return n.length>0?t.reconfigure(await Promise.all(n)):t.reconfigure([])},async([e],t)=>{if(e().options.interface.autocomplete){const{autocomplete:n}=await Promise.resolve().then(()=>Br);return t.reconfigure(n(e().options))}return t.reconfigure([])},async([e],t)=>{if(e().options.interface.images){const{images:n}=await Promise.resolve().then(()=>Rr);return t.reconfigure(n())}return t.reconfigure([])},async([e],t)=>{const{keybindings:n,trapTab:r}=e().options,i=r??n.tab,a=r??n.shiftTab;if(i||a){const{indentWithTab:l}=await Promise.resolve().then(()=>Ir);return t.reconfigure(l({tab:i,shiftTab:a}))}return t.reconfigure([])},async([e],t)=>{if(e().options.interface.lists){const{lists:n}=await Promise.resolve().then(()=>Xr);return t.reconfigure(n())}return t.reconfigure([])},async([e],t)=>{if(e().options.placeholder){const{placeholder:n}=await Promise.resolve().then(()=>Yr);return t.reconfigure(n(e().options.placeholder))}return t.reconfigure([])},async([e],t)=>{if(e().options.interface.readonly){const{readonly:n}=await Promise.resolve().then(()=>Jr);return t.reconfigure(n())}return t.reconfigure([])},async([e],t)=>{if(e().options.search){const{search:n}=await Promise.resolve().then(()=>to);return t.reconfigure(n())}return t.reconfigure([])},async([e],t)=>{if(e().options.interface.spellcheck){const{spellcheck:n}=await Promise.resolve().then(()=>ro);return t.reconfigure(n())}return t.reconfigure([])},async([e],t)=>{if(e().options.vim){const{vim:n}=await Promise.resolve().then(()=>oo);return t.reconfigure(n())}return t.reconfigure([])},async(e,t)=>{const{markdownKeymap:n}=await Promise.resolve().then(()=>ao),r=n(e);return t.reconfigure(r())}],Ft=["Blockquote"],Qt=g.Decoration.line({attributes:{class:"cm-blockquote"}}),Ut=g.Decoration.line({attributes:{class:"cm-blockquote-open"}}),Kt=g.Decoration.line({attributes:{class:"cm-blockquote-close"}}),Xt=g.ViewPlugin.define(e=>({update:()=>Yt(e)}),{decorations:e=>e.update()}),Yt=e=>{const t=new b.RangeSetBuilder,n=P.syntaxTree(e.state);for(const r of e.visibleRanges)for(let i=r.from;i<r.to;){const a=e.state.doc.lineAt(i);n.iterate({enter({type:l,from:s,to:c}){if(l.name!=="Document"&&Ft.includes(l.name)){t.add(a.from,a.from,Qt);const d=e.state.doc.lineAt(s),f=e.state.doc.lineAt(c);return d.number===a.number&&t.add(a.from,a.from,Ut),f.number===a.number&&t.add(a.from,a.from,Kt),!1}},from:a.from,to:a.to}),i=a.to+1}return t.finish()},Zt=()=>[Xt],Jt=["CodeBlock","FencedCode","HTMLBlock","CommentBlock"],Q={"data-enable-grammarly":"false","data-gramm":"false","data-grammarly-skip":"true",spellcheck:"false"},Gt=g.Decoration.line({attributes:{...Q,class:"cm-codeblock"}}),en=g.Decoration.line({attributes:{...Q,class:"cm-codeblock-open"}}),tn=g.Decoration.line({attributes:{...Q,class:"cm-codeblock-close"}}),nn=g.Decoration.mark({attributes:{...Q,class:"cm-code"}}),rn=g.Decoration.mark({attributes:{...Q,class:"cm-code cm-code-open"}}),on=g.Decoration.mark({attributes:{...Q,class:"cm-code cm-code-close"}}),an=g.ViewPlugin.define(e=>({update:()=>sn(e)}),{decorations:e=>e.update()}),sn=e=>{const t=new b.RangeSetBuilder,n=P.syntaxTree(e.state);for(const r of e.visibleRanges)for(let i=r.from;i<r.to;){const a=e.state.doc.lineAt(i);let l;n.iterate({enter({type:s,from:c,to:d}){if(s.name!=="Document")if(Jt.includes(s.name)){t.add(a.from,a.from,Gt);const f=e.state.doc.lineAt(c),x=e.state.doc.lineAt(d);return f.number===a.number&&t.add(a.from,a.from,en),x.number===a.number&&t.add(a.from,a.from,tn),!1}else s.name==="InlineCode"?l={from:c,to:d,innerFrom:c,innerTo:d}:s.name==="CodeMark"&&(c===l.from?(l.innerFrom=d,t.add(c,d,rn)):d===l.to&&(l.innerTo=c,t.add(l.innerFrom,l.innerTo,nn),t.add(c,d,on)))},from:a.from,to:a.to}),i=a.to+1}return t.finish()},ln=()=>[an],cn=()=>[g.EditorView.editorAttributes.of({class:"ink-mde-container"}),g.EditorView.contentAttributes.of({class:"ink-mde-editor-content"})],dn=()=>[...cn()],un=()=>g.EditorView.lineWrapping,fn=()=>[P.syntaxHighlighting(P.HighlightStyle.define([{tag:m.tags.atom,color:"var(--ink-internal-syntax-atom-color)"},{tag:m.tags.meta,color:"var(--ink-internal-syntax-meta-color)"},{tag:m.tags.emphasis,color:"var(--ink-internal-syntax-emphasis-color)",fontStyle:"var(--ink-internal-syntax-emphasis-font-style)"},{tag:m.tags.strong,color:"var(--ink-internal-syntax-strong-color)",fontWeight:"var(--ink-internal-syntax-strong-font-weight)"},{tag:m.tags.strikethrough,color:"var(--ink-internal-syntax-strikethrough-color)",textDecoration:"var(--ink-internal-syntax-strikethrough-text-decoration)"},{tag:m.tags.comment,color:"var(--ink-internal-syntax-comment-color)",fontStyle:"var(--ink-internal-syntax-comment-font-style)"},{tag:m.tags.monospace,color:"var(--ink-internal-syntax-code-color)",fontFamily:"var(--ink-internal-syntax-code-font-family)"},{tag:m.tags.name,color:"var(--ink-internal-syntax-name-color)"},{tag:m.tags.labelName,color:"var(--ink-internal-syntax-name-label-color)"},{tag:m.tags.propertyName,color:"var(--ink-internal-syntax-name-property-color)"},{tag:m.tags.definition(m.tags.propertyName),color:"var(--ink-internal-syntax-name-property-definition-color)"},{tag:m.tags.variableName,color:"var(--ink-internal-syntax-name-variable-color)"},{tag:m.tags.definition(m.tags.variableName),color:"var(--ink-internal-syntax-name-variable-definition-color)"},{tag:m.tags.local(m.tags.variableName),color:"var(--ink-internal-syntax-name-variable-local-color)"},{tag:m.tags.special(m.tags.variableName),color:"var(--ink-internal-syntax-name-variable-special-color)"},{tag:m.tags.heading,color:"var(--ink-internal-syntax-heading-color)",fontWeight:"var(--ink-internal-syntax-heading-font-weight)"},{tag:m.tags.heading1,color:"var(--ink-internal-syntax-heading1-color)",fontSize:"var(--ink-internal-syntax-heading1-font-size)",fontWeight:"var(--ink-internal-syntax-heading1-font-weight)"},{tag:m.tags.heading2,color:"var(--ink-internal-syntax-heading2-color)",fontSize:"var(--ink-internal-syntax-heading2-font-size)",fontWeight:"var(--ink-internal-syntax-heading2-font-weight)"},{tag:m.tags.heading3,color:"var(--ink-internal-syntax-heading3-color)",fontSize:"var(--ink-internal-syntax-heading3-font-size)",fontWeight:"var(--ink-internal-syntax-heading3-font-weight)"},{tag:m.tags.heading4,color:"var(--ink-internal-syntax-heading4-color)",fontSize:"var(--ink-internal-syntax-heading4-font-size)",fontWeight:"var(--ink-internal-syntax-heading4-font-weight)"},{tag:m.tags.heading5,color:"var(--ink-internal-syntax-heading5-color)",fontSize:"var(--ink-internal-syntax-heading5-font-size)",fontWeight:"var(--ink-internal-syntax-heading5-font-weight)"},{tag:m.tags.heading6,color:"var(--ink-internal-syntax-heading6-color)",fontSize:"var(--ink-internal-syntax-heading6-font-size)",fontWeight:"var(--ink-internal-syntax-heading6-font-weight)"},{tag:m.tags.keyword,color:"var(--ink-internal-syntax-keyword-color)"},{tag:m.tags.number,color:"var(--ink-internal-syntax-number-color)"},{tag:m.tags.operator,color:"var(--ink-internal-syntax-operator-color)"},{tag:m.tags.punctuation,color:"var(--ink-internal-syntax-punctuation-color)"},{tag:m.tags.link,color:"var(--ink-internal-syntax-link-color)"},{tag:m.tags.url,color:"var(--ink-internal-syntax-url-color)"},{tag:m.tags.string,color:"var(--ink-internal-syntax-string-color)"},{tag:m.tags.special(m.tags.string),color:"var(--ink-internal-syntax-string-special-color)"},{tag:m.tags.processingInstruction,color:"var(--ink-internal-syntax-processing-instruction-color)"}]))],mn=e=>{if(e.length>0)return De(e)},Re=([e,t])=>b.EditorState.create({doc:e().options.doc,selection:mn(e().options.selections),extensions:[g.keymap.of([...Z.defaultKeymap,...Z.historyKeymap]),Zt(),ln(),Z.history(),dn(),un(),fn(),...Ht([e,t])]}),gn=([e,t],n)=>{t(J(e(),{options:{doc:n}})),e().editor.setState(Re([e,t]))},pn=([e])=>e().options,kn=async([e,t],n)=>{const{workQueue:r}=e();return r.enqueue(async()=>{t(J(e(),{options:n}));const i=await de([e,t]);e().editor.dispatch({effects:i})})},Ve=(e,t={})=>{if(t.selections)return Ie(e,t.selections);if(t.selection)return ke(e,t.selection);if(t.at)return hn(e,t.at)},hn=(e,t)=>{const[n]=e;if(t===ge.Start)return ke(e,{start:0,end:0});if(t===ge.End){const r=n().editor.state.doc.length;return ke(e,{start:r,end:r})}},Ie=([e],t)=>{const{editor:n}=e();n.dispatch(n.state.update({selection:De(t)}))},ke=(e,t)=>Ie(e,[t]),bn=([e],t)=>{const{editor:n}=e();n.dispatch(n.state.update({changes:{from:0,to:n.state.doc.length,insert:t}}))},xn=([e,t],{after:n,before:r,selection:i})=>{const{editor:a}=e(),l=i||ye([e,t]).pop()||{start:0,end:0},s=a.state.sliceDoc(l.start,l.end);ce([e,t],`${r}${s}${n}`,l),Ve([e,t],{selections:[{start:l.start+r.length,end:l.end+r.length}]})},yn=(e,t)=>{const n={callbacks:{fulfilled:[],rejected:[],settled:[]},status:"pending"},r=(s,{resolve:c,reject:d})=>()=>{try{const f=s(n.value);Promise.resolve(f).then(c,d)}catch(f){d(f)}},i=s=>{n.status==="pending"&&(n.status="rejected",n.value=s,n.callbacks.rejected.forEach(c=>c()),n.callbacks.settled.forEach(c=>c()))},a=s=>{n.status==="pending"&&(n.status="fulfilled",n.value=s,n.callbacks.fulfilled.forEach(c=>c()),n.callbacks.settled.forEach(c=>c()))},l=(s,c)=>new Promise((d,f)=>{n.status==="pending"&&(s&&n.callbacks.fulfilled.push(r(s,{resolve:d,reject:f})),c&&n.callbacks.rejected.push(r(c,{resolve:void 0,reject:f}))),n.status==="fulfilled"&&s&&r(s,{resolve:d,reject:f})(),n.status==="rejected"&&c&&r(c,{resolve:void 0,reject:f})()});return queueMicrotask(()=>{try{t(a,i)}catch(s){i(s)}}),{...e,[Symbol.toStringTag]:"awaitable",catch:l.bind(void 0,void 0),finally:s=>new Promise((c,d)=>{n.status==="pending"&&n.callbacks.settled.push(r(s,{resolve:c,reject:d})),n.status==="fulfilled"&&(s(),c(n.value)),n.status==="rejected"&&(s(),d(n.value))}),then:l}},We=e=>{const t={destroy:gt.bind(void 0,e),focus:me.bind(void 0,e),format:ae.bind(void 0,e),getDoc:_t.bind(void 0,e),insert:ce.bind(void 0,e),load:gn.bind(void 0,e),options:pn.bind(void 0,e),reconfigure:kn.bind(void 0,e),select:Ve.bind(void 0,e),selections:ye.bind(void 0,e),update:bn.bind(void 0,e),wrap:xn.bind(void 0,e)};return yn(t,(n,r)=>{try{const[i]=e;i().workQueue.enqueue(()=>n(t))}catch(i){r(i)}})},vn=e=>Qe({block:!0,side:-1,...e}),Fe=e=>g.Decoration.line({...e,type:"line"}),wn=e=>g.Decoration.mark({...e,type:"mark"}),ue=e=>{const t=n=>e.eq?e.eq(n):e.id?e.id===n.id:!1;return{compare:n=>t(n),coordsAt:()=>null,destroy:()=>{},eq:n=>t(n),estimatedHeight:-1,ignoreEvent:()=>!0,lineBreaks:0,toDOM:()=>document.createElement("span"),updateDOM:()=>!1,...e}},Qe=e=>g.Decoration.widget({block:!1,side:0,...e,widget:ue({...e.widget}),type:"widget"}),re=(e,t)=>{const n=[];return P.syntaxTree(e).iterate({enter:r=>{if(t.nodes.includes(r.type.name)){const i=t.onMatch(e,r);if(!i)return;Array().concat(i).forEach(l=>{if(l.spec.type==="line"){const s=Fe({...l.spec,node:{...r}});for(let c=e.doc.lineAt(r.from);c.from<r.to;c=e.doc.lineAt(c.to+1))n.push(s.range(c.from))}if(l.spec.type==="mark"){const s=wn({...l.spec,node:{...r}}).range(r.from,r.to);n.push(s)}if(l.spec.type==="widget"){const s=Qe({...l.spec,node:{...r}}).range(r.from);n.push(s)}})}},from:t.range?.from,to:t.range?.to}),n.sort((r,i)=>r.from-i.from)},$n=(e,t,n)=>{const r=[],i=e.iter(),a=[],l=[];for(;i.value;)a.push({...i}),i.next();t.changes.iterChangedRanges((d,f,x,y)=>{a.forEach(v=>{if(v.value){const B=v.value.spec.node.to-v.value.spec.node.from,H=v.from,T=v.from+B;_n(H,T,x,y)&&l.push(v)}});const _={from:x,to:y};r.push(...re(t.state,{...n,range:_}))});const s=a.filter(d=>!l.includes(d)).flatMap(d=>{const f=d.value?.range(d.from);return f?[f]:[]});return r.push(...s),r.sort((d,f)=>d.from-f.from)},_n=(e,t,n,r)=>Math.max(e,n)<=Math.min(t,r),Ne=e=>b.StateField.define({create(t){return b.RangeSet.of(re(t,e))},update(t,n){if(n.reconfigured||n.effects.length>0)return b.RangeSet.of(re(n.state,e));const r=t.map(n.changes);return n.docChanged?e.optimize?b.RangeSet.of($n(r,n,e)):b.RangeSet.of(re(n.state,e)):r},provide(t){return g.EditorView.decorations.from(t)}}),Sn=e=>m.Tag.define(e),Cn=e=>e.charCodeAt(0),U=e=>ve(e,[m.tags.processingInstruction]),ve=(e,t=[])=>{const n=Sn();return{node:Nn({name:e,style:[n,...t]}),tag:n}},Mn=e=>e,En=e=>e,Ln=e=>e,Nn=e=>e,jn=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})},te=new Proxy({},{get:(e,t,n)=>e[t]?e[t]:e[t]=(async()=>{const{importer:r}=await jn(Object.assign({"./importers/katex.ts":()=>Promise.resolve().then(()=>lo)}),`./importers/${t}.ts`),i=await r();return e[t]=i,i})()}),Pn=(e,t)=>{if(!te[e])return console.error("[katex] module is not resolvable");if("then"in te[e])return Promise.resolve(te[e]).then(t);t(te[e])},Y={dollarSign:Cn("$")},Tn=/\$.*?\$/,Dn=/\$(?<math>.*?)\$/,se=ve("MathInline"),le=U("MathInlineMark"),we=U("MathInlineMarkOpen"),$e=U("MathInlineMarkClose"),On=En({name:se.node.name,parse:(e,t,n)=>{if(t!==Y.dollarSign)return-1;const r=e.slice(n,e.end);if(!Tn.test(r))return-1;const i=r.match(Dn);if(!i?.groups?.math)return-1;const a=i.groups.math.length;return e.addElement(e.elt(se.node.name,n,n+a+2,[e.elt(le.node.name,n,n+1,[e.elt(we.node.name,n,n+1)]),e.elt(le.node.name,n+a+1,n+a+2,[e.elt($e.node.name,n+a+1,n+a+2)])]))}}),Ue=ve("MathBlock"),he=U("MathBlockMark"),Ke=U("MathBlockMarkOpen"),Xe=U("MathBlockMarkClose"),zn=Mn({name:"MathBlock",parse:(e,t)=>{if(t.next!==Y.dollarSign||t.text.charCodeAt(t.pos+1)!==Y.dollarSign)return!1;const n=e.lineStart+t.pos,r=n+t.text.length;for(;e.nextLine();)if(t.next===Y.dollarSign&&t.text.charCodeAt(t.pos+1)===Y.dollarSign){const i=e.lineStart+t.pos,a=i+t.text.length;e.addElement(e.elt(Ue.node.name,n,a,[e.elt(he.node.name,n,r,[e.elt(Ke.node.name,n,r)]),e.elt(he.node.name,i,a,[e.elt(Xe.node.name,i,a)])])),e.nextLine();break}return!0}}),An=Ln({defineNodes:[se.node,le.node,$e.node,we.node,Ue.node,he.node,Ke.node,Xe.node],parseBlock:[zn],parseInline:[On]}),je=(e,t)=>{Pn("katex",n=>{n.render(e,t,{output:"html",throwOnError:!1})})},Bn=()=>[F({key:"katex",type:A.grammar,value:async()=>An}),F({key:"katex",value:async()=>Ne({nodes:["MathBlock","MathBlockMarkClose","MathBlockMarkOpen"],onMatch:(e,t)=>{const n=["ink-mde-line-math-block"];return t.name==="MathBlockMarkOpen"&&n.push("ink-mde-line-math-block-open"),t.name==="MathBlockMarkClose"&&n.push("ink-mde-line-math-block-close"),Fe({attributes:{class:n.join(" ")}})},optimize:!1})}),F({key:"katex",value:async()=>Ne({nodes:["MathBlock"],onMatch:(e,t)=>{const n=e.sliceDoc(t.from,t.to).split(`
`).slice(1,-1).join(`
`);if(n)return vn({widget:ue({id:n,toDOM:()=>{const r=document.createElement("div"),i=document.createElement("div");return r.className="ink-mde-block-widget-container",i.className="ink-mde-block-widget ink-mde-katex-target",r.appendChild(i),je(n,i),r},updateDOM:r=>{const i=r.querySelector(".ink-mde-katex-target");return i?(je(n,i),!0):!1}})})},optimize:!1})}),F({key:"katex",value:async()=>P.syntaxHighlighting(P.HighlightStyle.define([{tag:[se.tag,le.tag],backgroundColor:"var(--ink-internal-block-background-color)"},{tag:[$e.tag],backgroundColor:"var(--ink-internal-block-background-color)",borderRadius:"0 var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0",paddingRight:"var(--ink-internal-inline-padding)"},{tag:[we.tag],backgroundColor:"var(--ink-internal-block-background-color)",borderRadius:"var(--ink-internal-border-radius) 0 0 var(--ink-internal-border-radius)",paddingLeft:"var(--ink-internal-inline-padding)"}]))}),F({key:"katex",value:async()=>g.EditorView.theme({".ink-mde-line-math-block":{backgroundColor:"var(--ink-internal-block-background-color)",padding:"0 var(--ink-internal-block-padding) !important"},".ink-mde-line-math-block-open":{borderRadius:"var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0 0"},".ink-mde-line-math-block-close":{borderRadius:"0 0 var(--ink-internal-border-radius) var(--ink-internal-border-radius)"}})})],Hn=()=>{const e={queue:[],workload:0},t=async()=>{const n=e.queue.pop();n&&(await n(),e.workload--,await t())};return{enqueue:n=>new Promise((r,i)=>{const a=async()=>{try{await n(),r()}catch(l){i(l)}};e.queue.push(a),e.workload++,!(e.workload>1)&&t()})}},be=()=>{const e={doc:"",files:{clipboard:!1,dragAndDrop:!1,handler:()=>{},injectMarkup:!0,types:["image/*"]},hooks:{afterUpdate:()=>{},beforeUpdate:()=>{}},interface:{appearance:ie.Auto,attribution:!0,autocomplete:!1,images:!1,lists:!1,readonly:!1,spellcheck:!0,toolbar:!1},katex:!1,keybindings:{tab:!0,shiftTab:!0},placeholder:"",plugins:[Bn()],readability:!1,search:!0,selections:[],toolbar:{bold:!0,code:!0,codeBlock:!0,heading:!0,image:!0,italic:!0,link:!0,list:!0,orderedList:!0,quote:!0,taskList:!0,upload:!1},trapTab:void 0,vim:!1};return{doc:"",editor:{},extensions:Vt(),options:e,root:Le(),target:Le(),workQueue:Hn()}},qn=e=>J(be(),e),_e=(e,t={})=>{const[n,r]=u.createSignal(qn({...t,doc:e.doc||"",options:e}));return[n,r]},Se=225,Rn=(e,t=Se)=>{const n=Wn(e,t),r=Fn(e),i=In(e),a=Vn(e);return[n,r,i,a].join(" | ")},Vn=e=>`${Qn(e)} chars`,In=e=>`${Un(e)} lines`,Wn=(e,t=Se)=>{const n=Kn(e,t),r=Math.floor(n),i=Math.floor(n%1*60);return r===0?`${i}s read`:`${r}m ${i}s to read`},Fn=e=>`${Ye(e)} words`,Qn=e=>e.length,Un=e=>e.split(/\n/).length,Kn=(e,t=Se)=>Ye(e)/t,Ye=e=>{const t=e.replace(/[']/g,"").replace(/[^\w\d]+/g," ").trim();return t?t.split(/\s+/).length:0},Xn=o.template("<div class=ink-mde-readability><span>"),Yn=o.template("<span>&nbsp;|"),Zn=o.template('<div class=ink-mde-attribution><span>&nbsp;powered by <a class=ink-mde-attribution-link href=https://github.com/davidmyersdev/ink-mde rel="noopener noreferrer"target=_blank>ink-mde'),Jn=o.template("<div class=ink-mde-details><div class=ink-mde-container><div class=ink-mde-details-content><!$><!/><!$><!/><!$><!/>"),Gn=()=>{const[e]=K();return(()=>{const t=o.getNextElement(Jn),n=t.firstChild,r=n.firstChild,i=r.firstChild,[a,l]=o.getNextMarker(i.nextSibling),s=a.nextSibling,[c,d]=o.getNextMarker(s.nextSibling),f=c.nextSibling,[x,y]=o.getNextMarker(f.nextSibling);return o.insert(r,o.createComponent(u.Show,{get when(){return e().options.readability},get children(){const _=o.getNextElement(Xn),v=_.firstChild;return o.insert(v,()=>Rn(e().doc)),_}}),a,l),o.insert(r,o.createComponent(u.Show,{get when(){return o.memo(()=>!!e().options.readability)()&&e().options.interface.attribution},get children(){return o.getNextElement(Yn)}}),c,d),o.insert(r,o.createComponent(u.Show,{get when(){return e().options.interface.attribution},get children(){return o.getNextElement(Zn)}}),x,y),t})()},er=".ink-drop-zone{align-items:center;background-color:#00000080;color:var(--ink-internal-color);display:flex;inset:0;justify-content:center;position:var(--ink-internal-modal-position);z-index:100}.ink-drop-zone:not(.visible){display:none}.ink-drop-zone-modal{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);box-sizing:border-box;height:100%;max-height:20rem;max-width:40rem;padding:1rem;position:relative;width:100%}.ink-drop-zone-hide{cursor:pointer;height:1.75rem;position:absolute;right:.25rem;top:.25rem;width:1.75rem}.ink-drop-zone-hide svg{background-color:var(--ink-internal-block-background-color)}.ink-drop-zone-droppable-area{align-items:center;border:.2rem dashed var(--ink-internal-color);border-radius:.125rem;box-sizing:border-box;display:flex;flex-direction:column;font-size:1.25em;gap:1rem;height:100%;justify-content:center;padding:1rem;text-align:center}.ink-drop-zone-file-preview{align-items:center;display:flex;flex-wrap:wrap;gap:.5rem;max-width:25.5rem}.ink-drop-zone-file-preview-image{border:.125rem solid #222;border-radius:.125rem;box-sizing:border-box;height:6rem;object-fit:cover;padding:.5rem;width:6rem}",tr=o.template("<span>uploading files..."),nr=o.template('<div class=ink-drop-zone><style></style><div class=ink-drop-zone-modal><div class=ink-drop-zone-droppable-area><div class=ink-drop-zone-file-preview></div><!$><!/></div><div class=ink-drop-zone-hide><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z">'),rr=o.template("<img class=ink-drop-zone-file-preview-image>"),or=o.template("<span>drop files here"),ir=()=>{const[e,t]=u.createSignal(0),[n,r]=u.createSignal([]),[i,a]=u.createSignal(!1),[l,s]=u.createSignal(!1),[c,d]=K(),f=()=>{s(!1)},x=k=>{if(c().options.files.dragAndDrop){k.preventDefault(),k.stopPropagation();const w=k.dataTransfer;w?.files?T(w.files):(t(0),s(!1),r([]))}},y=k=>{c().options.files.dragAndDrop&&(k.preventDefault(),t(e()+1),s(!0))},_=k=>{c().options.files.dragAndDrop&&(k.preventDefault(),t(e()-1),e()===0&&s(!1))},v=k=>{c().options.files.dragAndDrop&&(k.preventDefault(),s(!0))},B=k=>{c().options.files.dragAndDrop&&(k.preventDefault(),t(0),s(!1))},H=k=>{if(c().options.files.clipboard){k.preventDefault();const w=k.clipboardData;w?.files&&w.files.length>0&&T(w.files)}},T=k=>{Array.from(k).forEach(w=>{r([...n(),w])}),a(!0),s(!0),Promise.resolve(c().options.files.handler(k)).then(w=>{if(c().options.files.injectMarkup&&w){const X=`![](${w})`;ce([c,d],X)}}).finally(()=>{t(0),a(!1),s(!1),r([])})};return u.onMount(()=>{document.addEventListener("dragenter",y),document.addEventListener("dragleave",_),document.addEventListener("dragover",v),document.addEventListener("drop",B),c().root.addEventListener("paste",H)}),u.onCleanup(()=>{document.removeEventListener("dragenter",y),document.removeEventListener("dragleave",_),document.removeEventListener("dragover",v),document.removeEventListener("drop",B),c().root.removeEventListener("paste",H)}),(()=>{const k=o.getNextElement(nr),w=k.firstChild,X=w.nextSibling,I=X.firstChild,p=I.firstChild,D=p.nextSibling,[S,O]=o.getNextMarker(D.nextSibling),z=I.nextSibling;return o.setProperty(w,"textContent",er),I.addEventListener("drop",x),o.insert(p,o.createComponent(u.For,{get each(){return n().slice(0,8)},children:$=>(()=>{const E=o.getNextElement(rr);return o.effect(C=>{const N=$.name,j=URL.createObjectURL($);return N!==C._v$&&o.setAttribute(E,"alt",C._v$=N),j!==C._v$2&&o.setAttribute(E,"src",C._v$2=j),C},{_v$:void 0,_v$2:void 0}),E})()})),o.insert(I,o.createComponent(u.Show,{get when(){return i()},get fallback(){return o.getNextElement(or)},get children(){return o.getNextElement(tr)}}),S,O),z.$$click=f,o.effect(()=>k.classList.toggle("visible",!!l())),o.runHydrationEvents(),k})()};o.delegateEvents(["click"]);const ar=([e,t],n)=>{const r=n?.getRootNode(),i=r?.nodeType===11?r:void 0,a=new g.EditorView({dispatch:l=>{const{options:s}=e(),c=l.newDoc.toString();s.hooks.beforeUpdate(c),a.update([l]),l.docChanged&&(t({...e(),doc:c}),s.hooks.afterUpdate(c))},root:i,state:Re([e,t])});return a},sr=e=>{const[t,n]=K(),r=ar([t,n],e.target),{workQueue:i}=t();return n(J(t(),{editor:r})),i.enqueue(async()=>{const a=await de([t,n]);r.dispatch({effects:a})}),r.dom},lr=o.template("<button class=ink-button type=button>"),M=e=>(()=>{const t=o.getNextElement(lr);return t.$$click=n=>e.onclick(n),o.insert(t,()=>e.children),o.runHydrationEvents(),t})();o.delegateEvents(["click"]);const cr=".ink-mde .ink-mde-toolbar{background-color:var(--ink-internal-block-background-color);color:inherit;display:flex;flex-shrink:0;overflow-x:auto;padding:.25rem}.ink-mde .ink-mde-toolbar .ink-mde-container{display:flex;gap:var(--ink-internal-toolbar-group-spacing)}.ink-mde .ink-mde-toolbar-group{display:flex;gap:var(--ink-internal-toolbar-item-spacing)}.ink-mde .ink-mde-toolbar .ink-button{align-items:center;background:none;border:none;border-radius:var(--ink-internal-border-radius);color:inherit;cursor:pointer;display:flex;height:2.25rem;justify-content:center;padding:.4rem;width:2.25rem}.ink-mde .ink-mde-toolbar .ink-button:hover{background-color:var(--ink-internal-block-background-color-on-hover)}.ink-mde .ink-mde-toolbar .ink-button>*{align-items:center;display:flex;height:100%}",dr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M6 4V10M6 16V10M6 10H14M14 10V4M14 10V16">'),ur=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-width=1.5 stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M6.5 10H10.5C12.1569 10 13.5 11.3431 13.5 13C13.5 14.6569 12.1569 16 10.5 16H6.5V4H9.5C11.1569 4 12.5 5.34315 12.5 7C12.5 8.65686 11.1569 10 9.5 10">'),fr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M11 4L9 16M13 4H9M7 16H11">'),ne=o.template("<div class=ink-mde-toolbar-group><!$><!/><!$><!/><!$><!/>"),mr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M2.00257 16H17.9955M2.00055 4H18M7 10H18.0659M2 8.5V11.4999C2.4 11.5 2.5 11.5 2.5 11.5V11V10.5M4 8.5V11.4999H4.5V11V10.5">'),gr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M13 4L7 16"></path><path d="M5 7L2 10L5 13"></path><path d="M15 7L18 10L15 13">'),pr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M7 4L8 6">'),kr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M7 16H17.8294"></path><path d="M2 16H4"></path><path d="M7 10H17.8294"></path><path d="M2 10H4"></path><path d="M7 4H17.8294"></path><path d="M2 4H4">'),hr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M7 16H18"></path><path d="M2 17.0242C2.48314 17.7569 3.94052 17.6154 3.99486 16.7919C4.05315 15.9169 3.1975 16.0044 2.99496 16.0044M2.0023 14.9758C2.48544 14.2431 3.94282 14.3846 3.99716 15.2081C4.05545 16.0831 3.1998 16.0002 2.99726 16.0002"></path><path d="M7 10H18"></path><path d="M2.00501 11.5H4M2.00193 8.97562C2.48449 8.24319 3.9401 8.38467 3.99437 9.20777C4.05259 10.0825 2.04342 10.5788 2 11.4996"></path><path d="M7 4H18"></path><path d="M2 5.5H4M2.99713 5.49952V2.5L2.215 2.93501">'),br=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M7 16H17.8294"></path><path d="M5 15L3 17L2 16"></path><path d="M7 10H17.8294"></path><path d="M5 9L3 11L2 10"></path><path d="M7 4H17.8294"></path><path d="M5 3L3 5L2 4">'),xr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M9.12127 10.881C10.02 11.78 11.5237 11.7349 12.4771 10.7813L15.2546 8.00302C16.2079 7.04937 16.253 5.54521 15.3542 4.6462C14.4555 3.74719 12.9512 3.79174 11.9979 4.74539L10.3437 6.40007M10.8787 9.11903C9.97997 8.22002 8.47626 8.26509 7.52288 9.21874L4.74545 11.997C3.79208 12.9506 3.74701 14.4548 4.64577 15.3538C5.54452 16.2528 7.04876 16.2083 8.00213 15.2546L9.65633 13.5999">'),yr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><rect x=2 y=4 width=16 height=12 rx=1></rect><path d="M7.42659 7.67597L13.7751 13.8831M2.00208 12.9778L7.42844 7.67175"></path><path d="M11.9119 12.0599L14.484 9.54443L17.9973 12.9785"></path><path d="M10.9989 7.95832C11.551 7.95832 11.9986 7.52072 11.9986 6.98092C11.9986 6.44113 11.551 6.00354 10.9989 6.00354C10.4468 6.00354 9.99921 6.44113 9.99921 6.98092C9.99921 7.52072 10.4468 7.95832 10.9989 7.95832Z">'),vr=o.template('<svg viewBox="0 0 20 20"fill=none stroke=currentColor stroke-miterlimit=5 stroke-linecap=round stroke-linejoin=round><path d="M10 13V4M10 4L13 7M10 4L7 7"></path><path d="M2 13V15C2 15.5523 2.44772 16 3 16H17C17.5523 16 18 15.5523 18 15V13">'),wr=o.template("<input type=file>"),$r=o.template("<div class=ink-mde-toolbar><style></style><div class=ink-mde-container><!$><!/><!$><!/><!$><!/><!$><!/>"),_r=()=>{const[e,t]=K(),[n,r]=u.createSignal(),i=s=>{ae([e,t],s),me([e,t])},a=s=>{const c=s.target;c?.files&&Promise.resolve(e().options.files.handler(c.files)).then(d=>{if(d){const f=`![](${d})`;ce([e,t],f),me([e,t])}})},l=()=>{n()?.click()};return(()=>{const s=o.getNextElement($r),c=s.firstChild,d=c.nextSibling,f=d.firstChild,[x,y]=o.getNextMarker(f.nextSibling),_=x.nextSibling,[v,B]=o.getNextMarker(_.nextSibling),H=v.nextSibling,[T,k]=o.getNextMarker(H.nextSibling),w=T.nextSibling,[X,I]=o.getNextMarker(w.nextSibling);return o.setProperty(c,"textContent",cr),o.insert(d,o.createComponent(u.Show,{get when(){return e().options.toolbar.heading||e().options.toolbar.bold||e().options.toolbar.italic},get children(){const p=o.getNextElement(ne),D=p.firstChild,[S,O]=o.getNextMarker(D.nextSibling),z=S.nextSibling,[$,E]=o.getNextMarker(z.nextSibling),C=$.nextSibling,[N,j]=o.getNextMarker(C.nextSibling);return o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.heading},get children(){return o.createComponent(M,{onclick:()=>i(h.Heading),get children(){return o.getNextElement(dr)}})}}),S,O),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.bold},get children(){return o.createComponent(M,{onclick:()=>i(h.Bold),get children(){return o.getNextElement(ur)}})}}),$,E),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.italic},get children(){return o.createComponent(M,{onclick:()=>i(h.Italic),get children(){return o.getNextElement(fr)}})}}),N,j),p}}),x,y),o.insert(d,o.createComponent(u.Show,{get when(){return e().options.toolbar.quote||e().options.toolbar.codeBlock||e().options.toolbar.code},get children(){const p=o.getNextElement(ne),D=p.firstChild,[S,O]=o.getNextMarker(D.nextSibling),z=S.nextSibling,[$,E]=o.getNextMarker(z.nextSibling),C=$.nextSibling,[N,j]=o.getNextMarker(C.nextSibling);return o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.quote},get children(){return o.createComponent(M,{onclick:()=>i(h.Quote),get children(){return o.getNextElement(mr)}})}}),S,O),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.codeBlock},get children(){return o.createComponent(M,{onclick:()=>i(h.CodeBlock),get children(){return o.getNextElement(gr)}})}}),$,E),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.code},get children(){return o.createComponent(M,{onclick:()=>i(h.Code),get children(){return o.getNextElement(pr)}})}}),N,j),p}}),v,B),o.insert(d,o.createComponent(u.Show,{get when(){return e().options.toolbar.list||e().options.toolbar.orderedList||e().options.toolbar.taskList},get children(){const p=o.getNextElement(ne),D=p.firstChild,[S,O]=o.getNextMarker(D.nextSibling),z=S.nextSibling,[$,E]=o.getNextMarker(z.nextSibling),C=$.nextSibling,[N,j]=o.getNextMarker(C.nextSibling);return o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.list},get children(){return o.createComponent(M,{onclick:()=>i(h.List),get children(){return o.getNextElement(kr)}})}}),S,O),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.orderedList},get children(){return o.createComponent(M,{onclick:()=>i(h.OrderedList),get children(){return o.getNextElement(hr)}})}}),$,E),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.taskList},get children(){return o.createComponent(M,{onclick:()=>i(h.TaskList),get children(){return o.getNextElement(br)}})}}),N,j),p}}),T,k),o.insert(d,o.createComponent(u.Show,{get when(){return e().options.toolbar.link||e().options.toolbar.image||e().options.toolbar.upload},get children(){const p=o.getNextElement(ne),D=p.firstChild,[S,O]=o.getNextMarker(D.nextSibling),z=S.nextSibling,[$,E]=o.getNextMarker(z.nextSibling),C=$.nextSibling,[N,j]=o.getNextMarker(C.nextSibling);return o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.link},get children(){return o.createComponent(M,{onclick:()=>i(h.Link),get children(){return o.getNextElement(xr)}})}}),S,O),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.image},get children(){return o.createComponent(M,{onclick:()=>i(h.Image),get children(){return o.getNextElement(yr)}})}}),$,E),o.insert(p,o.createComponent(u.Show,{get when(){return e().options.toolbar.upload},get children(){return o.createComponent(M,{onclick:l,get children(){return[o.getNextElement(vr),(()=>{const ee=o.getNextElement(wr);return o.use(r,ee),ee.addEventListener("change",a),ee.style.setProperty("display","none"),ee})()]}})}}),N,j),p}}),X,I),s})()},Sr=".ink-mde{border:2px solid var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);color:var(--ink-internal-color, inherit);display:flex;flex-direction:var(--ink-internal-flex-direction, column);font-family:var(--ink-internal-font-family)}.ink-mde .cm-cursor{border-left-color:var(--ink-internal-color, inherit);margin-left:0}.ink-mde .cm-tooltip{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);font-family:inherit;padding:.25rem}.ink-mde .cm-tooltip.cm-tooltip-autocomplete ul{font-family:inherit}.ink-mde .cm-tooltip.cm-tooltip-autocomplete ul li.ink-tooltip-option{border-radius:var(--ink-internal-border-radius);padding:.25rem}.ink-mde .cm-tooltip.cm-tooltip-autocomplete ul li.ink-tooltip-option[aria-selected]{background-color:#96969640}.ink-mde .cm-completionLabel{font-family:inherit}.ink-mde,.ink-mde *{box-sizing:border-box}.ink-mde,.ink-mde .ink-mde-editor{display:flex;flex-direction:column;flex-grow:1;flex-shrink:1;min-height:0}.ink-mde .ink-mde-editor{overflow:auto;padding:.5rem}.ink-mde .ink-mde-toolbar,.ink-mde .ink-mde-details{display:flex;flex-grow:0;flex-shrink:0}.ink-mde .ink-mde-details{background-color:var(--ink-internal-block-background-color);display:flex;padding:.5rem}.ink-mde .ink-mde-details-content{color:inherit;display:flex;filter:brightness(.75);flex-wrap:wrap;font-size:.75em;justify-content:flex-end}.ink-mde .ink-mde-attribution{display:flex;justify-content:flex-end}.ink-mde .ink-mde-attribution-link{color:currentColor;font-weight:600;text-decoration:none}.ink-mde .ink-mde-container{margin-left:auto;margin-right:auto;width:100%}.ink-mde .ink-mde-search-panel{background-color:var(--ink-internal-block-background-color);border-radius:.25rem;padding:.25rem;position:absolute;right:.25rem;top:.25rem;width:clamp(10rem,30%,100%)}.ink-mde .ink-mde-search-panel:focus-within{outline-color:#6495ed;outline-style:solid}.ink-mde .ink-mde-search-input{background-color:transparent;border:none;border-radius:.25rem;color:inherit;font-size:inherit;outline:none;width:100%}.ink-mde .ink-mde-task-toggle{cursor:pointer;height:1rem;line-height:2em;margin:0 .25rem 0 0;position:relative;top:-1px;vertical-align:middle;width:1rem}.ink-mde .cm-editor{display:flex;flex-direction:column;position:relative}.ink-mde .cm-panels{background-color:unset;border:unset;z-index:10}.ink-mde .cm-searchMatch{background-color:#6495ed50}.ink-mde .cm-searchMatch-selected{background-color:#6495edcc}.ink-mde .cm-scroller{align-items:flex-start;display:flex;font-family:var(--ink-internal-font-family);font-size:var(--ink-internal-editor-font-size);line-height:var(--ink-internal-editor-line-height);overflow-x:auto;position:relative}.ink-mde .cm-content{display:block;flex-grow:2;flex-shrink:0;margin:0;outline:none;padding:0;white-space:nowrap}.ink-mde .cm-lineWrapping{display:flex;flex-direction:column;flex-shrink:1;overflow-wrap:unset;word-break:break-word;white-space:pre-wrap;width:100%;overflow-x:hidden}.ink-mde .cm-line .cm-code,.ink-mde .cm-line .cm-blockquote{word-break:break-all}.ink-mde .cm-line{font-family:var(--ink-internal-font-family);padding:0}.ink-mde .cm-line span{display:inline}.ink-mde .cm-line.cm-blockquote{background-color:var(--ink-internal-block-background-color);border-left:.25rem solid currentColor;padding:0 var(--ink-internal-block-padding)}.ink-mde .cm-line.cm-blockquote.cm-blockquote-open{border-top-left-radius:var(--ink-internal-border-radius);border-top-right-radius:var(--ink-internal-border-radius);padding-top:var(--ink-internal-block-padding)}.ink-mde .cm-line.cm-blockquote.cm-blockquote-close{border-bottom-left-radius:var(--ink-internal-border-radius);border-bottom-right-radius:var(--ink-internal-border-radius);padding-bottom:var(--ink-internal-block-padding)}.ink-mde .cm-line.cm-codeblock{background-color:var(--ink-internal-block-background-color);font-family:var(--ink-internal-code-font-family);padding:0 var(--ink-internal-block-padding)}.ink-mde .cm-line.cm-codeblock.cm-codeblock-open{border-radius:var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0 0;padding-top:var(--ink-internal-block-padding)}.ink-mde .cm-line.cm-codeblock.cm-codeblock-close{border-radius:0 0 var(--ink-internal-border-radius) var(--ink-internal-border-radius);padding-bottom:var(--ink-internal-block-padding)}.ink-mde .cm-line .cm-code{background-color:var(--ink-internal-block-background-color);font-family:var(--ink-internal-code-font-family);padding:var(--ink-internal-inline-padding) 0}.ink-mde .cm-line .cm-code.cm-code-open{border-radius:var(--ink-internal-border-radius) 0 0 var(--ink-internal-border-radius);padding-left:var(--ink-internal-inline-padding)}.ink-mde .cm-line .cm-code.cm-code-close{border-radius:0 var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0;padding-right:var(--ink-internal-inline-padding)}.ink-mde .cm-image-backdrop{background-color:var(--ink-internal-block-background-color)}.ink-mde .ink-mde-block-widget-container{padding:.5rem 0}.ink-mde .ink-mde-block-widget{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);padding:var(--ink-internal-block-padding)}",Cr=o.template("<style> "),Mr=()=>{const[e,t]=K(),[n,r]=u.createSignal(fe(e()));return u.createEffect(()=>{r(fe(e()))}),u.onMount(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),a=l=>{const{editor:s,root:c,workQueue:d}=e();c.isConnected?d.enqueue(async()=>{const f=await de([e,t]);s.dispatch({effects:f}),r(fe(e()))}):i.removeEventListener("change",a)};i.addEventListener("change",a)}),(()=>{const i=o.getNextElement(Cr),a=i.firstChild;return o.effect(()=>o.setProperty(a,"data",`.ink {
  ${n().join(`
  `)}
}
${Sr}`)),i})()},Er=o.template('<div class="ink ink-mde"><!$><!/><!$><!/><!$><!/><div class=ink-mde-editor></div><!$><!/>'),Lr=e=>{const[t,n]=K(),r=i=>{n(J(t(),{root:i}))};return(()=>{const i=o.getNextElement(Er),a=i.firstChild,[l,s]=o.getNextMarker(a.nextSibling),c=l.nextSibling,[d,f]=o.getNextMarker(c.nextSibling),x=d.nextSibling,[y,_]=o.getNextMarker(x.nextSibling),v=y.nextSibling,B=v.nextSibling,[H,T]=o.getNextMarker(B.nextSibling);return o.use(r,i),o.spread(i,o.mergeProps(mt),!1,!0),o.insert(i,o.createComponent(Mr,{}),l,s),o.insert(i,o.createComponent(u.Show,{get when(){return t().options.files.clipboard||t().options.files.dragAndDrop},get children(){return o.createComponent(ir,{})}}),d,f),o.insert(i,o.createComponent(u.Show,{get when(){return t().options.interface.toolbar},get children(){return o.createComponent(_r,{})}}),y,_),o.insert(v,o.createComponent(sr,{get target(){return e.target}})),o.insert(i,o.createComponent(u.Show,{get when(){return t().options.readability||t().options.interface.attribution},get children(){return o.createComponent(Gn,{store:[t,n]})}}),H,T),o.runHydrationEvents(),i})()},Ze=u.createContext([()=>be(),e=>typeof e=="function"?e(be()):e]),Nr=e=>o.createComponent(Ze.Provider,{get value(){return e.store},get children(){return e.children}}),K=()=>u.useContext(Ze),Je=e=>o.createComponent(Nr,{get store(){return e.store},get children(){return o.createComponent(Lr,{get store(){return e.store},get target(){return e.target}})}}),jr=o.template("<div class=ink-mde-textarea>"),Pr=e=>e,Tr=e=>e,Dr=e=>e,Ge=(e,t={})=>{const n=_e(t);return nt(),o.hydrate(()=>o.createComponent(Je,{store:n,target:e}),e),We(n)},et=(e,t={})=>e.querySelector(ft)?Ge(e,t):Ce(e,t),tt=({key:e="",type:t,value:n})=>new Proxy({key:e,type:t||"default"},{get:(r,i,a)=>i==="value"&&!r[i]?(r.value=n(),Be(r.value)?r.value.then(l=>r.value=l):r.value):r[i]}),F=tt,Ce=(e,t={})=>{const n=_e(t);return o.render(()=>o.createComponent(Je,{store:n,target:e}),e),We(n)},Or=(e={})=>(_e(e),""),nt=()=>{let e,t;e=window._$HY||(window._$HY={events:[],completed:new WeakSet,r:{}}),t=n=>n&&n.hasAttribute&&(n.hasAttribute("data-hk")?n:t(n.host&&n.host instanceof Node?n.host:n.parentNode)),["click","input"].forEach(n=>document.addEventListener(n,r=>{let i=r.composedPath&&r.composedPath()[0]||r.target,a=t(i);a&&!e.completed.has(a)&&e.events.push([a,r])})),e.init=(n,r)=>{e.r[n]=[new Promise((i,a)=>r=i),r]},e.set=(n,r,i)=>{(i=e.r[n])&&i[1](r),e.r[n]=[r]},e.unset=n=>{delete e.r[n]},e.load=(n,r)=>{if(r=e.r[n])return r[0]}},zr=(e,t={})=>{const n=o.getNextElement(jr),r=e.value;e.after(n),e.style.display="none";const i=Ce(n,{doc:r,...t});return e.form&&e.form.addEventListener("submit",()=>{e.value=i.getDoc()}),i},Ar=e=>{const[t,n]=G(V(A.completion,e));return[Ee.autocompletion({defaultKeymap:!0,icons:!1,override:n,optionClass:()=>"ink-tooltip-option"}),Ee.closeBrackets()]},Br=Object.freeze(Object.defineProperty({__proto__:null,autocomplete:Ar},Symbol.toStringTag,{value:"Module"}));class Hr extends g.WidgetType{url;constructor({url:t}){super(),this.url=t}eq(t){return t.url===this.url}toDOM(){const t=document.createElement("div"),n=t.appendChild(document.createElement("div")),r=n.appendChild(document.createElement("figure")),i=r.appendChild(document.createElement("img"));return t.setAttribute("aria-hidden","true"),t.className="cm-image-container",n.className="cm-image-backdrop",r.className="cm-image-figure",i.className="cm-image-img",i.src=this.url,t.style.paddingBottom="0.5rem",t.style.paddingTop="0.5rem",n.classList.add("cm-image-backdrop"),n.style.borderRadius="var(--ink-internal-border-radius)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.overflow="hidden",n.style.maxWidth="100%",r.style.margin="0",i.style.display="block",i.style.maxHeight="var(--ink-internal-block-max-height)",i.style.maxWidth="100%",i.style.width="100%",t}}const qr=()=>{const e=/!\[.*?\]\((?<url>.*?)\)/,t=i=>g.Decoration.widget({widget:new Hr(i),side:-1,block:!0}),n=i=>{const a=[];return P.syntaxTree(i).iterate({enter:({type:l,from:s,to:c})=>{if(l.name==="Image"){const d=e.exec(i.doc.sliceString(s,c));d&&d.groups&&d.groups.url&&a.push(t({url:d.groups.url}).range(i.doc.lineAt(s).from))}}}),a.length>0?b.RangeSet.of(a):g.Decoration.none};return[b.StateField.define({create(i){return n(i)},update(i,a){return a.docChanged?n(a.state):i.map(a.changes)},provide(i){return g.EditorView.decorations.from(i)}})]},Rr=Object.freeze(Object.defineProperty({__proto__:null,images:qr},Symbol.toStringTag,{value:"Module"})),Vr=({tab:e=!0,shiftTab:t=!0}={})=>g.keymap.of([{key:"Tab",run:e?Z.indentMore:void 0},{key:"Shift-Tab",run:t?Z.indentLess:void 0}]),Ir=Object.freeze(Object.defineProperty({__proto__:null,indentWithTab:Vr},Symbol.toStringTag,{value:"Module"})),Wr=()=>ue({eq:()=>!1,toDOM:()=>{const e=document.createElement("span");return e.innerHTML="&#x2022;",e.setAttribute("aria-hidden","true"),e}}),Fr=e=>ue({eq:t=>t.isChecked===e,ignoreEvent:()=>!1,isChecked:e,toDOM:()=>{const t=document.createElement("input");return t.setAttribute("aria-hidden","true"),t.className="ink-mde-task-toggle",t.type="checkbox",t.checked=e,t}}),Qr=(e,t,n,r)=>Math.max(e,n)<=Math.min(t,r),Pe=(e,t,n)=>e.selection.ranges.some(r=>Qr(t,n,r.from,r.to)),Ur=(e,t)=>{const n=e.state.sliceDoc(t+2,t+5);return e.dispatch({changes:{from:t+2,to:t+5,insert:n==="[ ]"?"[x]":"[ ]"}}),!0},Kr=()=>{const e=()=>g.Decoration.replace({widget:Wr()}),t=a=>g.Decoration.replace({widget:Fr(a)}),n=a=>{const l=[];return P.syntaxTree(a).iterate({enter:({type:s,from:c,to:d})=>{if(s.name==="ListMark"&&!Pe(a,c,d)){const f=a.sliceDoc(d+1,d+4);if(!["[ ]","[x]"].includes(f)){const x=a.sliceDoc(c,d);["-","*"].includes(x)&&l.push(e().range(c,d))}}if(s.name==="TaskMarker"&&!Pe(a,c-2,d)){const f=a.sliceDoc(c,d);l.push(t(f==="[x]").range(c-2,d))}}}),l.length>0?b.RangeSet.of(l):g.Decoration.none},r=g.ViewPlugin.define(()=>({}),{eventHandlers:{mousedown:(a,l)=>{const s=a.target;if(s?.nodeName==="INPUT"&&s.classList.contains("ink-mde-task-toggle"))return Ur(l,l.posAtDOM(s))}}}),i=b.StateField.define({create(a){return n(a)},update(a,{state:l}){return n(l)},provide(a){return g.EditorView.decorations.from(a)}});return[r,i]},Xr=Object.freeze(Object.defineProperty({__proto__:null,lists:Kr},Symbol.toStringTag,{value:"Module"})),Yr=Object.freeze(Object.defineProperty({__proto__:null,placeholder:g.placeholder},Symbol.toStringTag,{value:"Module"})),Zr=()=>b.EditorState.readOnly.of(!0),Jr=Object.freeze(Object.defineProperty({__proto__:null,readonly:Zr},Symbol.toStringTag,{value:"Module"})),Gr=o.template("<div class=ink-mde-search-panel><input class=ink-mde-search-input type=text>"),eo=()=>[q.search({top:!0,createPanel:e=>u.createRoot(t=>{const[n,r]=u.createSignal(q.getSearchQuery(e.state));let i;const a=s=>{if(g.runScopeHandlers(e,s,"search-panel"))return s.preventDefault();s.code==="Enter"&&(s.preventDefault(),s.shiftKey?q.findPrevious(e):q.findNext(e))},l=s=>{const{value:c}=s.target;r(new q.SearchQuery({search:c})),e.dispatch({effects:q.setSearchQuery.of(n())})};return{destroy:()=>{t()},dom:(()=>{const s=o.getNextElement(Gr),c=s.firstChild;s.$$keydown=a;const d=i;return typeof d=="function"?o.use(d,c):i=c,c.$$keydown=a,c.$$input=l,o.setAttribute(c,"main-field","true"),o.effect(()=>o.setProperty(c,"value",n().search)),o.runHydrationEvents(),s})(),mount:()=>{i?.focus()},top:!0}})}),g.keymap.of(q.searchKeymap)];o.delegateEvents(["keydown","input"]);const to=Object.freeze(Object.defineProperty({__proto__:null,search:eo},Symbol.toStringTag,{value:"Module"})),no=()=>g.EditorView.contentAttributes.of({spellcheck:"true"}),ro=Object.freeze(Object.defineProperty({__proto__:null,spellcheck:no},Symbol.toStringTag,{value:"Module"})),oo=Object.freeze(Object.defineProperty({__proto__:null,vim:dt.vim},Symbol.toStringTag,{value:"Module"})),io=e=>()=>b.Prec.highest(g.keymap.of([{key:"Mod-b",run:()=>(ae(e,"bold"),!0),preventDefault:!0},{key:"Mod-i",run:()=>(ae(e,"italic"),!0),preventDefault:!0}])),ao=Object.freeze(Object.defineProperty({__proto__:null,markdownKeymap:io},Symbol.toStringTag,{value:"Module"})),so=async()=>{const{default:e}=await import("katex");return e},lo=Object.freeze(Object.defineProperty({__proto__:null,importer:so},Symbol.toStringTag,{value:"Module"}));exports.appearanceTypes=pe;exports.default=et;exports.defineConfig=Pr;exports.defineOptions=Tr;exports.definePlugin=Dr;exports.hydrate=Ge;exports.ink=et;exports.inkPlugin=tt;exports.plugin=F;exports.pluginTypes=A;exports.render=Ce;exports.renderToString=Or;exports.solidPrepareForHydration=nt;exports.wrap=zr;
//# sourceMappingURL=client.cjs.map
